<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Formulário Ingresso</title>
  <script>
    function validarEEnviar(e) {
      e.preventDefault();

      const nome = document.getElementById("nome").value.trim();
      const telefone = document.getElementById("telefone").value.trim();
      const nascimento = document.getElementById("nascimento").value;
      const ddd = telefone.substring(0, 2);
      const genero = document.querySelector('input[name="genero"]:checked').value;
      const genero_outro = document.getElementById("genero_outro").value.trim();
      const lote = document.getElementById("lote").value;

      const idade = new Date().getFullYear() - new Date(nascimento).getFullYear();
      if (idade < 18) return alert("⚠️ É necessário ter 18 anos ou mais.");

      if (ddd !== "47") alert("⚠️ Verifique se o DDD está correto. Deve ser 47.");

      const params = new URLSearchParams({
        nome,
        telefone,
        nascimento,
        convidado: document.getElementById("convidado").value,
        camiseta: document.getElementById("camiseta").value,
        genero,
        genero_outro,
        entrevero: document.getElementById("entrevero").value,
        pagamento: document.getElementById("pagamento").value,
        observacao: document.getElementById("observacao").value,
        lote
      });

      // URL do seu Apps Script Web App
      const googleScriptURL = "https://script.google.com/macros/s/AKfycbzKYLM20SqQpq42TjrA1LAWkxJzedeqm_gUffvSWloq6P6ilQSg2GafCdX6nOw6Y0OI7A/exec";
      window.location.href = `${googleScriptURL}?${params.toString()}`;
    }

    function toggleOutroGenero() {
      const outro = document.getElementById("genero_outro_container");
      const isOutro = document.getElementById("genero_outro_radio").checked;
      outro.style.display = isOutro ? "block" : "none";
    }
  </script>
</head>
<body>
  <h1>Formulário Ingresso</h1>
  <form onsubmit="validarEEnviar(event)">
    <label>Nome Completo: <input type="text" id="nome" required></label><br><br>
    <label>Telefone/WhatsApp: <input type="text" id="telefone" required></label><br><br>
    <label>Data de nascimento: <input type="date" id="nascimento" required></label><br><br>

    <label>Quem te convidou?
      <select id="convidado" required>
        <option value="">--Selecione--</option>
        <option value="Mikke">Mikke</option>
        <option value="Rian">Rian</option>
        <option value="Milly">Milly</option>
      </select>
    </label><br><br>

    <label>Tamanho da camiseta:
      <select id="camiseta" required>
        <option value="">--Selecione--</option>
        <option value="p">P</option>
        <option value="m">M</option>
        <option value="g">G</option>
      </select>
    </label><br><br>

    <fieldset>
      <legend>Gênero:</legend>
      <label><input type="radio" name="genero" value="masculino" required onchange="toggleOutroGenero()"> Masculino</label>
      <label><input type="radio" name="genero" value="feminino" onchange="toggleOutroGenero()"> Feminino</label>
      <label><input type="radio" name="genero" value="outro" id="genero_outro_radio" onchange="toggleOutroGenero()"> Outro</label>
    </fieldset>
    <div id="genero_outro_container" style="display:none;">
      <label>Especifique: <input type="text" id="genero_outro"></label>
    </div><br>

    <label>Opção do entrevero:
      <select id="entrevero" required>
        <option value="">--Selecione--</option>
        <option value="Carne">Carne</option>
        <option value="Vegano">Vegano</option>
      </select>
    </label><br><br>

    <label>Forma de pagamento:
      <select id="pagamento" required>
        <option value="">--Selecione--</option>
        <option value="PIX">PIX</option>
        <option value="2x via PIX (entrada + 2° parcela até o dia 02/08)">2x via PIX</option>
      </select>
    </label><br><br>

    <label>Observação: <textarea id="observacao" rows="3" cols="40"></textarea></label><br><br>

    <!-- Lote oculto -->
    <input type="hidden" id="lote" value="TOKEN_DO_LOTE_ATUAL">

    <button type="submit">Enviar</button>
  </form>
</body>
</html>
